# Модуль аутентификации
Модуль предназначен для аутентификации пользователей и создания новых пользователей.
Если еще ни один пользователь не создан, то создать пользователя можно без авторизации, для создания последующих пользователей используется авторизованный аккаунт с правами admin
Использует для авторизации пользователей jwt токены.
Пароль хранится в базе захешированным ` crypto.pbkdf2Sync(password, this.salt, 1, 128, 'sha1') `.
Возможные роли пользователей заданы в схеме ./schems/auth.js 

## API

| Path        | HTTP method | Params | Request Auth | Result |
| :---------- | :---------- | :----- | :----------- | :----- |
| /api/auth/user | POST | req.body | true | создание нового пользователя |
| /api/auth/login | POST | req.body | false | аутентификация |

## Как применять к эндпоинтам
Для аутентификации эндпоинтов которые работают по HTTP:
1. Импортировать функцию ` const isAuth = require('../moduleAuth/api') ` в роутер модуля.
1. На нужные эндпоинт установить мидлвар  ` post(isAuth, require('./api/post')) `

Для аутентификации эндпоинтов которые работают по Socket:
1. В нужном эндпоинте ` const socketAuth = require('../../moduleAuth/socketAuth'); `. Функция возвращает true\false после проверки токена.
1. Добавить проверку в начале эндпоинта ` if (!authResult) return socket.emit('RESULT', authErrorMsg); `